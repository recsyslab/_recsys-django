# 

前回は推薦リストをコンソールに出力するだけでした。今回は推薦リストをキャンバス上に視覚的に表示するようにしてみましょう。本チュートリアルでは、複数の推薦システムによる推薦リストを表示することを想定します。推薦システムごとに推薦スロットを用意し、それぞれの推薦リストに対応する推薦システムによる推薦リストを表示するようにします。

まず、JavaScript上でアイテムの情報を管理するためにアイテムクラスを定義します。`recsys_django/static/js/`ディレクトリに`Item.js`を作成し、下記のコードを記述してください。

リスト1: `recsys_django/static/js/Item.js`
```js
/**
 * アイテムクラス
 */
class Item {
    /**
     * @param id        アイテムID
     * @param name      アイテム名
     * @param score     スコア
     */
    constructor(id, name, red, white, shining, score) {
        this.id = id;           // アイテムID
        this.name = name;       // アイテム名
        this.red = red;         // 赤身
        this.white = white;     // 白身
        this.shining = shining; // 光物
        this.score = score;     // スコア

        // アイテム画像
        this.image = new Image();
        this.image.src = 'media/items/item' + ('00' + this.id).slice(-2) + '.png';
        let src = this.image.src;
        this.image.onload = function() {
            console.log(src + " : load completed");
        }
    }
}
```

アイテムクラスにはアイテムの画像ももたせています。アイテムの画像を用意しておきましょう。下記のとおり、`recsys_django/`ディレクトリ直下に`media/items/`ディレクトリを作成してください。

- `recsys_django/media/items/`

このディレクトリ内にアイテムの画像を配置します。ここでは、アイテムID 1～9に対応した九つの画像`item01.png`～`item09.png`を用意します。

つづいて、キャンバス上でインタフェースを設計していきます。まず、レイアウト設計に関わる定数を定義しいます。`main.js`の`定数`セクションに下記のコードを追加してください。

リスト2: `recsys_django/static/js/main.js`
```
/**
 * **** **** **** **** **** **** **** ****
 * 定数
 * **** **** **** **** **** **** **** ****
 */
MARGIN = 10;

ITEM_COUNT = 9;
ITEM_WIDTH = 200;
ITEM_HEIGHT = 200;

NEXT_BUTTON_WIDTH = 40;
NEXT_BUTTON_HEIGHT = ITEM_HEIGHT;

SLOT_SIZE = 3;
SLOT_WIDTH = NEXT_BUTTON_WIDTH + MARGIN + (ITEM_WIDTH + MARGIN) * SLOT_SIZE + NEXT_BUTTON_WIDTH;
SLOT_HEIGHT = MARGIN * 4 + ITEM_HEIGHT;

MAIN_SLOT_COUNT = 3;
MAIN_SLOT_LEFT = 0;
MAIN_SLOT_TOP = 0;
MAIN_SLOT_RANDOM = 0;
MAIN_SLOT_POPULARITY = 1;
MAIN_SLOT_ITEMCF = 2;
```
